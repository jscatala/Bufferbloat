After having a clear idea about the capacity of the network, it is necessary
to know how it speed and behavior works. This requires to analyzing how
latency behaves. As stated, latency is the time it takes a message to travel
from one computer to a sever, and has a huge impact on how the user experience
the network.

Within all the information that Netalyzr provides, it only will be taken only
the most relevant information to determining whether Bufferbloat is presented
on our network. For this, the data that will be take into consideration is:

\begin{description}

\item [DNS resolver Time:] This test intent to measure how quickly the DNS
resolver is able to resolve the mnemonic name. Slow resolvers may make the
network seem ``slow'' even if the network itself is fast.

\item [Network Buffers:] The most revealing fact of the existence of the
phenomenon studied. While it is a fact that is commonly overlooked, also it is
crucial to the quality of the network. If the buffer is too small, network
protocols such as TCP are unable to send as fast as the network allows. If the
buffer is too large, a single transfer will fill up the buffer, delaying all
other traffic.

\item [Network Performance:] To determine the performance of the network,
Netalyzr measures latency by sending a series of small messages to our server
and then seeing how long it takes the messages to return. Since the
communication if from outside US, the latency should naturally be higher, but
how much higher?
\end{description}


The results in table \ref{table:buffer} are much more clarifying than those
obtained in the previous test. In the first data set related with DNS, the
times are relatively stable and the time that took to resolve the requests
were almost indiscernible. While it is common to find cases with shorter at
$\sim15ms$ for local name resolution\footnote{ As example can be a site hosted
in the same country and tested with dig -
\url{http://linux.die.net/man/1/dig}}, the average resolution time is
acceptable within the metrics for international queries. A special case is
presented on the network tagged as \textit{``4Low''} were the time that take
to effectively resolving queries to any website is extremely high but after
the resolution finish,the network looks as had no major problem in data
acquisition. Also no mayor relation can be seen between the bandwidth and the
DNS resolve time.

\begin{table}[ht]
\begin{center}
\begin{tabular}{|c||c||c|c||c|c||}
 \hline
& & \multicolumn{2}{|c||}{Buffer} & \multicolumn{2}{|c||}{Performance} \\ \hline
Location	& DNS (ms) 	& Uplink (ms)	& Downlink (ms) & Latency (ms)	& Loss (\%) \\ \hline \hline
casa\_w		& 190		& 290			& 190 			& 140			& 0 		\\ \hline
casa2\_w	& 180		& 280			& 180 			& 140			& 0 		\\ \hline
casa\_c		& 180		& 280			& 190			& 140			& 0 		\\ \hline
marcia\_w	& 190		& 1200			& 860			& 190			& 0,5 		\\ \hline
marcia\_c	& 180		& 990			& 2100			& 190			& 0 		\\ \hline
sara\_w		& 220		& 5100			& 470			& 160			& 4 		\\ \hline
sara\_c		& 200		& 5100			& 459			& 160			& 4 		\\ \hline
polmos\_w	& 220		& 360			& 160			& 180			& 0 		\\ \hline
polmos2\_w	& 180		& 370			& 160			& 190			& 0 		\\ \hline
nalucem\_w	& 210		& 5100			& 1800			& 160			& 1,5 		\\ \hline
nalucem2\_w	& 210		& 5100			& 1800			& 210			& 0,2 		\\ \hline
mbahamon\_w	& 200		& 2900			& 290			& 200			& 1,5 		\\ \hline
4low\_w		& 1300		& 2900			& 590			& 180			& 0,5 		\\ \hline
hidalgo\_w	& 180		& 260			& 100			& 200			& 1,5  		\\ \hline
\end{tabular}
\caption[Netalyrz Test:DNS resolution time, Buffer time and Performance]{DNS resolution time, Buffer time and Performance}
\label{table:buffer}
\end{center}
\end{table}

The next four lines are crucial to proof existence of the phenomenon. The
buffer section can reveal how much time a packet spent in the existing buffers
along the way or, in other words into the link between the network and the
server. Unfortunately, in the uplink times are about $\sim300ms$, which
according by ICSI are times that in some cases may present a degraded
performance (as in online games or real time conference). For the downlink,
the networks that already are marked with high buffering time in the uplink
are the same for the opposite route. While the high measured times in the
uplink could it be justified by the diminish capacity to put new data in the
network against the capacity related with the downlink (related with the
asynchronous bandwidth capacity) there are cases in which the time is
excessive and Netalyzr alert the presence of excessive buffers possibly
generated by Bufferbloat.

\begin{table}[ht]
\begin{center}
\begin{tabular}{|c||c|c||}
 \hline
 & \multicolumn{2}{|c||}{Bandwidth (Mbps)} \\ \hline 
Location 	& Uplink & Downlink			   \\ \hline \hline
casa\_w		& 5		 & 14 				   \\ \hline
casa2\_w	& 5		 & 14 			   	   \\ \hline
casa\_c		& 5		 & 15 			       \\ \hline
marcia\_w	& 0,47	 & 1,5 			   	   \\ \hline
marcia\_c	& 0,54	 & 6,2 			   	   \\ \hline
sara\_w		& 0,57	 & 6,3 			   	   \\ \hline
sara\_c		& 0,57	 & 6,3 			   	   \\ \hline
polmos\_w	& 2,1	 & 9,6 			   	   \\ \hline
polmos2\_w	& 2,1	 & 9,6 			   	   \\ \hline
nalucem\_w	& 0,57	 & 4 			   	   \\ \hline
nalucem2\_w	& 0,57	 & 4 			   	   \\ \hline
mbahamon\_w	& 0,54	 & 7,8 			   	   \\ \hline
4low\_w		& 0,54	 & 6,6 			   	   \\ \hline
hidalgo\_w	& 1		 & 11 			   	   \\ \hline
\end{tabular}
\caption[Netalyrz Test: Bandwidth]{Bandwidths measured with Netalyzr}
\label{table:Bandwidth}
\end{center}
\end{table}


The main characteristic of Bufferbloat is the high latency, with some effect
on the packets loss, since packets spends most of the time in buffers along
the route. Netalyzr actually reveals that in at least two networks,
\textit{marcia} and \textit{sara}, this phenomenon occurs because although the
latency is low under normal conditions there is packet loss and buffer times
higher than normal. The packet loss can also be due to the conditions of the
experiments, and because due its characteristics, it is more common higher
packet lost using wireless but for these experiments there were no obstacles
between the router and computer located less than a meter from each other. Also
it is important to remember that the way of buffering time and latency are
calculated is through two different experiments with low and high load on the
network.

Among the characteristics of Netalyzr is the capacity to introduce a summary
table where it can be seen the different problems that arise in the networks
and the severity thereof. In Table \ref{table:Errores} are presented the
summary after all networks.

\begin{table}
\centering
\caption[Netalyrz Test: Summary of errors and warnings in Netalyzr]{Summary of errors and warnings in Netalyzr}
\label{table:Errores}
\subcaption*{Panel A: Summary or errors}
\begin{tabular}{|c||c|}
 \hline
Location		& Alerts            \\ \hline \hline
casa\_w			& 1,2,8             \\ \hline
casa2\_w		& 1,2,8             \\ \hline
casa\_c			& 1,2,8 			\\ \hline
marcia\_w		& 1, 3, 6, 9 		\\ \hline
marcia\_c		& 1, 3, 6, 8, 9 	\\ \hline
sara\_w			& 1, 2, 4, 5, 6, 8 	\\ \hline
sara\_c			& 1, 2, 4, 6, 8 	\\ \hline
polmos\_w		& 1,8 				\\ \hline
polmos2\_w		& 1, 3, 6, 8 		\\ \hline
nalucem\_w		& 1, 2, 6, 8 		\\ \hline
nalucem2\_w		& 1, 2, 6, 8, 10 	\\ \hline
mbahamon\_w		& 1, 3, 6, 8, 10 	\\ \hline
4low\_w			& A, 1, 3, 6, 7, 8 	\\ \hline
hidalgo\_w		& 1, 8 				\\ \hline
\end{tabular}
\bigskip
\subcaption*{Panel B: Description of errors}
\begin{tabular}{|c||c|}
 \hline
 \multicolumn{2}{|c|}{Alerts} \\ \hline \hline
A	& ISP's DNS is slow to lookup names								\\ \hline
1	& Certain TCP protocols are bloqued in outbound traffic 		\\ \hline
2	& The network does not reply when it needs fragmented traffic 	\\ \hline
3	& Fragmented UDP traffic if bloqued 							\\ \hline
4	& The packet loss was somewhat high 							\\ \hline
5	& The time to set up a TCP connection was somewhat high 		\\ \hline
6	& Network packet buffering is excessive 						\\ \hline
7	& DNS resolver may have probelms with DNSSEC 					\\ \hline
8	& Only some root servers returned DNSSEC information 			\\ \hline
9	& Not all DNS types were correctly processed 					\\ \hline
10	& The network indicated bursts of packet loss 					\\ \hline
\end{tabular}
\end{table}

With this summary is easy to clarify that the networks mentioned noted
actually have problems with the time with their buffers, specifically troubled
networks are: \textit{marcia, sara, nalucem, mbahamon} y \textit{4low}.
Coincidentally, less bandwidth networks are the same with longer buffers. In
addition, as mentioned, the network \textit{4low} also has serious issues
with the name resolution.


%\begin{table}[ht]
%\begin{center}
%\begin{tabular}{|c||c|}
% \hline
%Location		& Alerts            \\ \hline \hline
%casa\_w			& 1,2,8             \\ \hline
%casa2\_w		& 1,2,8             \\ \hline
%casa\_c			& 1,2,8 			\\ \hline
%marcia\_w		& 1, 3, 6, 9 		\\ \hline
%marcia\_c		& 1, 3, 6, 8, 9 	\\ \hline
%sara\_w			& 1, 2, 4, 5, 6, 8 	\\ \hline
%sara\_c			& 1, 2, 4, 6, 8 	\\ \hline
%polmos\_w		& 1,8 				\\ \hline
%polmos2\_w		& 1, 3, 6, 8 		\\ \hline
%nalucem\_w		& 1, 2, 6, 8 		\\ \hline
%nalucem2\_w		& 1, 2, 6, 8, 10 	\\ \hline
%mbahamon\_w		& 1, 3, 6, 8, 10 	\\ \hline
%4low\_w			& A, 1, 3, 6, 7, 8 	\\ \hline
%hidalgo\_w		& 1, 8 				\\ \hline
%\end{tabular}
%\caption[Netalyrz Test: Summary of errors and warnings in Netalyzr]{Summary of errors and warnings in Netalyzr}
%\label{table:Errores}
%\end{center}
%\end{table}

%\begin{table}[ht]
%\begin{center}
%\begin{tabular}{|c||c|}
% \hline
% \multicolumn{2}{|c|}{Alerts} \\ \hline \hline
%A	& ISP's DNS is slow to lookup names								\\ \hline
%1	& Certain TCP protocols are bloqued in outbound traffic 		\\ \hline
%2	& The network does not reply when it needs fragmented traffic 	\\ \hline
%3	& Fragmented UDP traffic if bloqued 							\\ \hline
%4	& The packet loss was somewhat high 							\\ \hline
%5	& The time to set up a TCP connection was somewhat high 		\\ \hline
%6	& Network packet buffering is excessive 						\\ \hline
%7	& DNS resolver may have probelms with DNSSEC 					\\ \hline
%8	& Only some root servers returned DNSSEC information 			\\ \hline
%9	& Not all DNS types were correctly processed 					\\ \hline
%10	& The network indicated bursts of packet loss 					\\ \hline
%\end{tabular}
%\caption[Netalyrz Test: Description of errors and warnings in Netalyzr]{Description of errors and warnings in %Netalyzr}
%\label{table:DescErrores}
%\end{center}
%\end{table}